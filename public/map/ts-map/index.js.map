{"version":3,"sources":["webpack:///webpack/bootstrap 01e9f4523d21b89e016a","webpack:///./src/ts/index.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 01e9f4523d21b89e016a","$(function () {\n    init()\n})\n\nvar socket:WebSocket = null\n\n\nvar charts:lineChart = null\n\nfunction init() {\n    let $messages = $(\"#messages\")\n    setWebSocket($messages)\n    displayLineChart()\n}\n\n\nfunction setWebSocket($messages:JQuery) {\n    if (!window[\"WebSocket\"]) {\n        alert(\"エラー:対応していないブラウザです\")\n    } else {\n        socket = new WebSocket(\"wss://ws.zaif.jp:8888/stream?currency_pair=btc_jpy\")\n        socket.onclose = function() {\n            console.log(\"接続が終了しました\")\n        }\n        socket.onmessage = function (e) {\n            // $messages.append($(\"<li>\").text(e.data))\n            if (charts != null){\n                charts.Update(e.data)\n            }\n            console.log(\"onmessages\");\n        }\n    }\n}\n\nfunction displayLineChart() {\n    charts = new lineChart(\"lineChart\")\n    charts.Display()\n}\n\n\n\n\n\n\nclass lineChart{\n    private id :string;\n    private lc:Chart\n    constructor(id: string) {\n        this.id = id;\n    }\n    public Display(){\n        var canvas = <HTMLCanvasElement>document.getElementById(this.id);\n        var ctx = canvas.getContext(\"2d\");\n        var labels: string[] = []\n        var data: number[] = []\n        for (var i = 0; i < 100; i++){\n            labels.push(String(i))\n            data.push(0)\n        }\n        this.lc = new Chart(ctx,\n            {\n                type: 'line',                           //◆棒グラフ\n\n                data: {\n                    //◆データ\n                    labels: labels,     //ラベル名\n                    datasets: [{                       //データ設定\n                        data: data,          //データ内容\n                        backgroundColor: [ '#FF44FF'],   //背景色\n                        fill: false,\n\n                    }]\n                },\n\n                options: {\n                    animation:{\n                        duration:0.2,\n                    },\n                    //◆オプション\n                    responsive: true,                  //グラフ自動設定\n                    legend: {                          //凡例設定\n                        display: false                 //表示設定\n                    },\n                    title: {                           //タイトル設定\n                        display: true,                 //表示設定\n                        fontSize: 18,                  //フォントサイズ\n                        text: 'タイトル'                //ラベル\n                    },\n                    scales: {                          //軸設定\n                        yAxes: [{                      //y軸設定\n                            display: true,             //表示設定\n                            scaleLabel: {              //軸ラベル設定\n                                display: true,          //表示設定\n                                labelString: '値段',  //ラベル\n                                fontSize: 18               //フォントサイズ\n                            },\n                            ticks: {                      //最大値最小値設定\n                                // min: 0,                   //最小値\n                                // max: 30,                  //最大値\n                                fontSize: 18,             //フォントサイズ\n                                //stepSize: 5,            //軸間隔\n                            },\n                        }],\n                        xAxes: [{                         //x軸設定\n                            display: true,                //表示設定\n                            barPercentage: 0.1,           //棒グラフ幅\n                            categoryPercentage: 0.1,      //棒グラフ幅\n                            scaleLabel: {                 //軸ラベル設定\n                                display: true,             //表示設定\n                                labelString: '時刻',  //ラベル\n                                fontSize: 18               //フォントサイズ\n                            },\n                            ticks: {\n                                fontSize: 18             //フォントサイズ\n                            },\n                        }],\n                    },\n                    layout: {                             //レイアウト\n                        padding: {                          //余白設定\n                            left: 100,\n                            right: 50,\n                            top: 0,\n                            bottom: 0\n                        }\n                    }\n                }}\n        );\n    }\n\n    public Update(data:string):void{\n        this.l=this.l+1\n        var d = JSON.parse(data) as apiData\n        console.log(d.last_price.price);\n        var date = new Date(d.timestamp)\n        this.lc.data.labels.shift()\n        this.lc.data.labels.push(String(date.getHours())+\":\"+String(date.getMinutes()))\n\n\n        var hoge = this.lc.data.datasets[0].data\n        for(var i = 0; i<hoge.length-1; i++){\n            this.lc.data.datasets[0].data[i] = hoge[i+1];\n            if (this.lc.data.datasets[0].data[i] <= 0){\n                this.lc.data.datasets[0].data[i] = Number(d.last_price.price)\n            }\n        }\n        this.lc.data.datasets[0].data[hoge.length-1] = Number(d.last_price.price);\n        //下記のプロパティを差し替えることによって、グラフを動的に変更できる\n        //グラフ描画指示\n        this.lc.config.options.title.text = d.currency_pair\n\n        this.lc.update()\n\n    }\n\n    private l =0\n}\n\n\nclass apiData{\n    public timestamp:string//\"2015-04-01 18:16:01.739990\",\n    public last_price:last_price//{\"action\":\"ask\",\"price\":30001},\n    public currency_pair:string//\"btc_jpy\"\n}\nclass last_price{\n    public action:string\n    public price:string\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ts/index.ts"],"sourceRoot":""}